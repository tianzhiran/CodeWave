@* <!DOCTYPE html> *@
@* <html lang="en"> *@
@* <head> *@
@*     <meta charset="utf-8" /> *@
@*     <meta name="viewport" content="width=device-width, initial-scale=1.0" /> *@
@*     <title>@ViewData["Title"] - FlixNow</title> *@
@*     <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" /> *@
@*     <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" /> *@
@*     <link rel="stylesheet" href="~/FlixNow.styles.css" asp-append-version="true" /> *@
@* </head> *@
@* <body> *@
@*     <header> *@
@*         <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3"> *@
@*             <div class="container-fluid"> *@
@*                 <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">FlixNow</a> *@
@*                 <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent" *@
@*                         aria-expanded="false" aria-label="Toggle navigation"> *@
@*                     <span class="navbar-toggler-icon"></span> *@
@*                 </button> *@
@*                 <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between"> *@
@*                     <ul class="navbar-nav flex-grow-1"> *@
@*                         <li class="nav-item"> *@
@*                             <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a> *@
@*                         </li> *@
@*                         <li class="nav-item"> *@
@*                             <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a> *@
@*                         </li> *@
@*                     </ul> *@
@*                 </div> *@
@*             </div> *@
@*         </nav> *@
@*     </header> *@
@*     <div class="container"> *@
@*         <main role="main" class="pb-3"> *@
@*             @RenderBody() *@
@*         </main> *@
@*     </div> *@

@*     <footer class="border-top footer text-muted"> *@
@*         <div class="container"> *@
@*             &copy; 2025 - FlixNow - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a> *@
@*         </div> *@
@*     </footer> *@
@*     <script src="~/lib/jquery/dist/jquery.min.js"></script> *@
@*     <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script> *@
@*     <script src="~/js/site.js" asp-append-version="true"></script> *@
@*     @await RenderSectionAsync("Scripts", required: false) *@
@* </body> 
@* </html> *@

@*
    _Layout.cshtml - FlixNow
*@
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - FlixNow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="~/css/_Layout.cshtml.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        /* Logo style */
        .flix-logo {
            font-size: 2.3rem;
            font-weight: 900;
            padding: 0.2em 1em 0.2em 0.8em;
            border-radius: 18px;
            background: rgba(38,224,174,0.14);
            box-shadow: 0 2px 10px #26e0ae33;
            letter-spacing: 3px;
            text-shadow: 0 2px 10px #0006;
            margin-right: 1.3rem;
        }

            .flix-logo .flix {
                color: #26e0ae;
            }

            .flix-logo .now {
                color: #fff;
            }
        /* Navbar link style */
        .navbar-nav .nav-link {
            font-size: 1.18rem;
            font-weight: 600;
            margin: 0 0.6em;
            padding: 0.5em 1.1em;
            border-radius: 12px;
            transition: background .22s, color .22s, box-shadow .22s;
        }

            .navbar-nav .nav-link:hover, .navbar-nav .nav-link.active {
                background: rgba(38,224,174,0.17);
                color: #22ffd9 !important;
                box-shadow: 0 2px 8px #26e0ae33;
            }
        /* Join Now button */
        .btn-joinnow {
            font-size: 1.13rem;
            font-weight: 700;
            padding: 0.57em 1.6em;
            border-radius: 99px;
            background: linear-gradient(90deg, #26e0ae 55%, #1b6ec2 100%);
            border: none;
            color: #001b24 !important;
            box-shadow: 0 2px 16px #22ffd966;
            margin-right: 0.7em;
            letter-spacing: 1px;
            transition: background .22s, color .22s, box-shadow .22s;
        }

            .btn-joinnow:hover {
                background: linear-gradient(90deg, #1b6ec2 10%, #22ffd9 100%);
                color: #000 !important;
                box-shadow: 0 4px 24px #22ffd9cc;
            }
        /* Footer fix for more visual separation */
        .footer {
            border-radius: 24px 24px 0 0;
            margin-top: 40px;
        }

        .login-icon .fa-user {
            font-size: 1.7em;
            color: #fff;
            filter: drop-shadow(0 0 6px #22ffd9aa);
            transition: color 0.2s;
        }

            .login-icon .fa-user:hover {
                color: #26e0ae;
            }

        .profile-circle {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2.6em;
            height: 2.6em;
            background: linear-gradient(135deg,#26e0ae 35%,#1b6ec2 100%);
            border-radius: 50%;
            box-shadow: 0 2px 14px #26e0ae70, 0 0 0 4px #101d;
            margin-right: 0.3em;
        }

            .profile-circle i {
                font-size: 1.55em;
                color: #fff;
                filter: drop-shadow(0 0 10px #1b6ec2aa);
            }

        .profile-icon .fa-user {
            font-size: 1.7em;
        }

        .dropdown-menu.bg-dark {
            background: #161a23 !important;
            color: #fff;
            min-width: 150px;
        }

            .dropdown-menu.bg-dark .dropdown-item {
                color: #22ffd9;
                transition: background .15s;
            }

                .dropdown-menu.bg-dark .dropdown-item:hover {
                    background: #222e;
                    color: #ffd700;
                }
    </style>
</head>
<body style="margin:0; padding:0; min-height:100vh; background:#111;">
    <!-- Top navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-transparent px-4" style="min-height:68px;">
        <a class="navbar-brand flix-logo d-flex align-items-center" href="@Url.Action("Index", "Home")">
            <span class="flix">Flix</span><span class="now">Now</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-center" id="mainNavbar">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "Index" && ViewContext.RouteData.Values["controller"]?.ToString() == "Home" ? "active" : "")"
                       href="@Url.Action("Index", "Home")" style="display:flex;align-items:center;">
                        <span style="font-size:1.33em;color:#f8d35c;margin-right:7px;">🏠</span>
                        Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Movies" ? "active" : "")"
                       href="@Url.Action("Index", "Movies")" style="display:flex;align-items:center;">
                        <span style="font-size:1.33em;color:#ff566f;margin-right:7px;">🎬</span>
                        Movies
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" style="display:flex;align-items:center;">
                        <span style="font-size:1.15em;color:#95cfff;margin-right:7px;">📞</span>
                        Contact
                    </a>
                </li>
            </ul>

        </div>
        <div class="d-flex align-items-center">
            @if (!User.Identity.IsAuthenticated)
            {
                <a class="btn btn-joinnow mx-2" href="@Url.Action("Register", "Account")">Join Now</a>
                <a class="nav-link login-icon" href="@Url.Action("Login", "Account")">
                    <i class="fa fa-user"></i>
                </a>
            }
            else
            {
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle profile-icon" href="#" id="profileDropdown" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false" style="display:flex;align-items:center;">
                        <span class="profile-circle me-2">
                            <i class="fa fa-user"></i>
                        </span>
                        <span class="d-none d-md-inline" style="color:#22ffd9; font-weight:600;">@User.Identity.Name</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end bg-dark" aria-labelledby="profileDropdown">
                        <!-- 账号类型显示在最顶部 -->
                        <li>
                            @if (User.IsInRole("Admin"))
                            {
                                <span class="dropdown-item-text text-danger fw-bold" style="font-size:1.15em;">
                                    👑 Admin
                                </span>
                            }
                            else if (User.IsInRole("Customer"))
                            {
                                <span class="dropdown-item-text text-info fw-bold" style="font-size:1.15em;">
                                    🎬 Customer
                                </span>
                            }
                        </li>
                        <li><hr class="dropdown-divider bg-secondary"></li>
                        <li>
                            <a class="dropdown-item text-danger" href="@Url.Action("Logout", "Account")">
                                <i class="fa fa-sign-out-alt me-1"></i> Logout
                            </a>
                        </li>
                    </ul>
                </div>
            }
        </div>
    </nav>

    <!-- Main content area -->
    <main role="main" class="pb-3"> 
        @RenderBody()
    </main>

    <!-- Footer -->
    <footer class="footer border-top text-center mt-auto"
            style="background:rgba(255,255,255,0.93); color:#1b6ec2; padding:16px 0; font-weight:500; letter-spacing:1px;">
        &copy; @DateTime.Now.Year - FlixNow Movie Ticket Booking System
    </footer>

    <!-- Required scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
